!function(e){function t(t){for(var r,i,s=t[0],c=t[1],u=t[2],d=0,v=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&v.push(o[i][0]),o[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(l&&l(t);v.length;)v.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={0:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var l=c;a.push([132,1]),n()}({132:function(e,t,n){n(133),n(337),e.exports=n(336)},336:function(e,t,n){e.exports=n.p+"css/style.css"},337:function(e,t,n){"use strict";n.r(t);var r=n(45),o=n.n(r),a="http://localhost:3000";function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.query=t}var t,n,r;return t=e,(n=[{key:"getResults",value:function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,regeneratorRuntime.awrap(o.a.get("".concat(a,"/dbs/v1/@all?q=").concat(this.query)));case 3:e=t.sent,this.result=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),null,this,[[0,7]])}}])&&i(t.prototype,n),r&&i(t,r),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=Date.now(),this.type=t.dbtype||"",this.connection={id:Date.now(),database:t.dbname||"",hostname:t.dbhost||"",port:t.dbport||"",user:t.dbuser||"",password:""},this.views=t.views||[]}var t,n,r;return t=e,(n=[{key:"saveDatabase",value:function(e){var t,n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t="".concat(a,"/dbs/v1/registerDB"),i.next=4,regeneratorRuntime.awrap(o.a.post(t,e));case 4:n=i.sent,r=n.data,console.log(r),i.next=12;break;case 9:i.prev=9,i.t0=i.catch(0),console.log(i.t0);case 12:case"end":return i.stop()}}),null,null,[[0,9]])}}])&&c(t.prototype,n),r&&c(t,r),e}();function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAuth=this.isLogged()}var t,n,r;return t=e,(n=[{key:"isLogged",value:function(){return!!localStorage.getItem("WSC12019_TOKEN")}},{key:"checkSession",value:function(){this.isLogged()||window.location.reload()}},{key:"login",value:function(e){var t,n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,t="".concat(a,"/dbs/v1/loginidentity"),i.next=4,regeneratorRuntime.awrap(o.a.post(t,e));case 4:n=i.sent,r=n.data,localStorage.setItem("WSC12019_TOKEN",r.token),window.location.reload(),i.next=13;break;case 10:i.prev=10,i.t0=i.catch(0),console.log(i.t0.message);case 13:case"end":return i.stop()}}),null,null,[[0,10]])}}])&&l(t.prototype,n),r&&l(t,r),e}(),v=n(131),f=n.n(v),m={app:document.getElementById("app"),btnLogin:document.querySelector(".login_btn"),btnMenuRegister:document.querySelector(".btn-menu-register"),btnMenuUpdate:document.querySelector(".btn-menu-update"),searchForm:document.querySelector(".search"),searchBtnForm:document.querySelector(".search__btn"),searchRestList:document.querySelector(".results__list"),searchTable:document.querySelector(".table-content"),searchCbo:document.querySelector(".search__field"),registerForm:document.querySelector(".register"),registerFormInputs:document.querySelector(".register").elements,registerContainer:document.querySelector(".register-db"),viewsBtnForm:document.querySelector(".open-views-form"),viewsBtnAddItem:document.querySelector(".add-item-view"),viewResultForm:document.querySelector(".inserted-items"),inputsItemView:document.querySelectorAll(".input-item-view"),btnSaveDatabase:document.querySelector(".save_database_btn"),formViewjs:document.querySelector(".form-vw"),headerViewBtn:document.querySelector(".header-views-form"),logOutBtn:document.querySelector(".btn-log-out")},p="loader",g=function(e){var t='\n    <div class="'.concat(p,'">\n      <svg>\n        <use href="img/icons.svg#icon-cw"></use>\n      </svg>\n    <div>\n  ');e.insertAdjacentHTML("afterbegin",t)},w=function(){var e=document.querySelector(".".concat(p));e&&e.parentElement.removeChild(e)},h=function(){m.searchRestList.innerHTML=""},b=function(e,t){var n='\n    <tr>\n      <th scope="row">'.concat(t,"</th>\n      <td>").concat(e.type,"</td>\n      <td>").concat(e.connection.database,"</td>\n      <td>").concat(e.connection.port,"</td>\n      <td>").concat(e.connection.hostname,"</td>\n    </tr>\n  ");m.searchRestList.insertAdjacentHTML("beforeend",n)},y=function(e){return!["checkbox","radio"].includes(e.type)||e.checked},S=function(e){return e.name&&e.value},k=function(){var e=m.registerFormInputs.dbtype,t=m.registerFormInputs.dbname,n=m.registerFormInputs.dbhost,r=m.registerFormInputs.dbport,o=m.registerFormInputs.dbuser;return 0===e.selectedIndex?(e.classList.add("input-error"),e.focus(),!1):""===t.value?(t.classList.add("input-error"),t.focus(),!1):""===n.value?(n.classList.add("input-error"),n.focus(),!1):""===r.value?(r.classList.add("input-error"),r.focus(),!1):""!==o.value||(o.classList.add("input-error"),o.focus(),!1)},L=function(){m.viewResultForm.innerHTML=""},I=function(e){var t='\n    <ul class="view-result-tbody">\n      <li>'.concat(e.name,"</li>\n      <li>").concat(e.path,'</li>\n      <li>\n        <button class="btn-tiny btn-delete-item" data-id=').concat(e.name,'>\n          <svg>\n            <use href="img/icons.svg#icon-circle-with-minus"></use>\n          </svg>\n        </button>\n      </li>\n    </ul>\n  ');m.viewResultForm.insertAdjacentHTML("beforeend",t)},x=function(e){m.viewResultForm.insertAdjacentHTML("beforeend",'\n    <ul class="view-result-thead">\n      <li>Nombre</li>\n      <li>Ruta</li>\n      <li>Eliminar</li>\n    </ul>\n  '),e&&e.forEach(I)},E=function(){m.app.insertAdjacentHTML("beforeend",'\n    <div class="login-container">\n      <div class="login">\n        <form class="login-form" name="loginform">\n          <h1 class="title">Iniciar Sesion</h1>\n          <div class="form-group">\n            <label for="">Usuario: </label>\n            <input type="text" name="logonId" id="logonId" class="form-input"\n              placeholder="Ingrese Usuario">\n          </div>\n          <div class="form-group">\n            <label for="">password: </label>\n            <input type="password" name="logonPassword" id="logonPassword" class="form-input"\n              placeholder="Ingrese Password">\n          </div>\n\n          <button class="btn login_btn">\n            <span>Ingresar</span>\n          </button>\n        </form>\n      </div>\n    </div>\n  ')};function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewslist=[]}var t,n,r;return t=e,(n=[{key:"addView",value:function(e){var t={name:e.nameview,path:e.pathview||""};return this.viewslist.push(t),this.persistData(),t}},{key:"deleteView",value:function(e){var t=this.viewslist.findIndex((function(t){return t.name===e}));this.viewslist.splice(t,1),this.persistData()}},{key:"isviewInserted",value:function(e){return-1!==this.viewslist.findIndex((function(t){return t.name===e}))}},{key:"persistData",value:function(){localStorage.setItem("views",JSON.stringify(this.viewslist))}},{key:"getNumViews",value:function(){return this.viewslist.length}},{key:"readStorage",value:function(){var e=JSON.parse(localStorage.getItem("views"));e&&(this.viewslist=e)}}])&&F(t.prototype,n),r&&F(t,r),e}(),q={};m.app.addEventListener("click",(function(e){var t;if(e.preventDefault(),e.target.closest(".login_btn")){var n=function(e){var t=Array.from(e);return[].reduce.call(t,(function(e,t){return function(e){return e.name&&e.value}(t)&&function(e){return!["checkbox","radio"].includes(e.type)||e.checked}(t)&&(e[t.name]=t.value),e}),{})}(e.target.closest(".login-form").elements);t=n,regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:(new d).login(t);case 2:case"end":return e.stop()}}))}})),m.btnMenuRegister.addEventListener("click",(function(e){h(),m.searchTable.style.display="none",m.registerContainer.style.display="block"}));var T=function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=m.searchCbo.value,q.search=new s(e),h(),g(m.searchTable),t.next=6,regeneratorRuntime.awrap(q.search.getResults());case 6:w(),(n=q.search.result)&&n.forEach(b);case 8:case"end":return t.stop()}var n}))};m.searchBtnForm.addEventListener("click",(function(e){e.preventDefault();var t=new d;t.isAuth?(T(),m.searchTable.style.display="block",m.registerContainer.style.display="none"):t.checkSession()}));var O=function(){var e;return regeneratorRuntime.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,n=Array.from(m.registerFormInputs),e=[].reduce.call(n,(function(e,t){return S(t)&&y(t)&&(e[t.name]=t.value),e}),{}),q.vwmodel=new R,q.vwmodel.readStorage(),e.views=q.vwmodel.viewslist,q.register=new u(e),g(m.registerForm),t.prev=6,t.next=9,regeneratorRuntime.awrap(q.register.saveDatabase(q.register));case 9:w(),Array.from(m.registerFormInputs).forEach((function(e,t){"SELECT"===e.nodeName&&(e.selectedIndex=0),"INPUT"===e.nodeName&&"text"===e.type&&(e.value="")})),localStorage.removeItem("views"),m.viewResultForm.innerHTML="",t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),console.log(t.t0.message);case 16:case"end":return t.stop()}var n}),null,null,[[6,13]])};m.registerForm.addEventListener("submit",(function(e){e.preventDefault(),k()&&O()})),m.btnSaveDatabase.addEventListener("click",(function(e){e.preventDefault();var t=new d;t.isAuth?k()&&O():t.checkSession()})),m.viewsBtnForm.addEventListener("click",(function(e){e.preventDefault()})),m.viewsBtnForm.addEventListener("click",(function(e){e.preventDefault(),m.formViewjs.classList.toggle("hidden"),e.target.classList.toggle("closed"),"Agregar +"===e.target.textContent?e.target.textContent="X":e.target.textContent="Agregar +"}));var j=function(){q.vwmodel=new R,q.vwmodel.readStorage();var e,t=function(){var e=Array.from(m.inputsItemView);return[].reduce.call(e,(function(e,t){return S(t)&&y(t)&&(e[t.name]=t.value),e}),{})}();q.vwmodel.isviewInserted(t.nameview)?(e="Vista ya existe este nombre, ingrese vista con un nombre diferente!",f.a.fire({position:"top-end",icon:"success",title:"".concat(e),showConfirmButton:!1,timer:1e3})):(L(),q.vwmodel.addView(t),x(q.vwmodel.viewslist),m.registerFormInputs.nameview.value="",m.registerFormInputs.pathview.value="")};m.viewsBtnAddItem.addEventListener("click",(function(e){var t,n,r;e.preventDefault(),(""!==(r=m.registerFormInputs.nameview).value||(r.classList.add("input-error"),r.focus(),t=r,n='\n  <div class="error">'.concat("Nombre"," es un campo requerido (*)</div>\n  "),t.insertAdjacentHTML("afterend",n),0))&&j()})),window.addEventListener("load",(function(){q.vmlogin=new d,q.vmlogin.isLogged(),q.vmlogin.isLogged()?(T(),q.vwmodel=new R,q.vwmodel.readStorage(),x(q.vwmodel.viewslist),_()):E()})),m.viewResultForm.addEventListener("click",(function(e){e.preventDefault();var t=e.target.closest(".btn-delete-item");t&&(q.vwmodel=new R,q.vwmodel.readStorage(),q.vwmodel.deleteView(t.dataset.id),L(),x(q.vwmodel.viewslist))}));var _=function(){m.logOutBtn.addEventListener("click",(function(e){console.log("loginsss out"),localStorage.removeItem("WSC12019_TOKEN"),window.location.reload()}))}}});